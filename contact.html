<!DOCTYPE html>
<html lang="en">
<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="main.js"></script>
    <!--custom css-->
    <link href="index.css" rel="stylesheet" />
    <link href="general.css" rel="stylesheet" />
    <link href="other-pages.css" rel="stylesheet" />
    <script>
        $(function(){ $("head").load("head.html", function() { pageNavSetup(); });  });
    </script>
    </head>

<body>
    <div id="content" style="display: none;">
    <div id="page-title" style="display: none;">about</div>
    <div id="banner"></div>
    <div id="header"></div>

    <div class="container-fluid p-3 p-sm-0">

        <div id="mainContainer" class="container d-block">

            <div class="row pt-lg-5 text-black">
                <h1 class="my-4">Contact Us</h1>
            </div>

            <div class="row pb-lg-5 text-black">
                <div class="h3">
                    For all inquiries, please fill out the form below.
                </div>
            </div>
            
            <!--form-->
            <div class="row pb-lg-5 mb-5 pt-3">
                <!--url for appscript generated by google form--> 
                <form action="https://script.google.com/macros/s/AKfycbzxvBn4Ca_gSwxDCLeQuOe71ZzVG8I28ucYAZld-3iF99Ika5ES9PkJGLRFBqCpklQs/exec" method="post" class="needs-validation" name="contactUsForm" id="contact-us-form" novalidate>
                    <div>
                        <label for="name">Name</label><br> <input class="form-control light-blue-background" id="contact-form-name" name="name" size="32" type="text" required>
                        <div><p class="warning-msg" id="warning-msg-name"></p></div><br> <!--Please provide a valid name-->
                    </div>
                    
                    <div>
                        <label for="email">Email</label><br> <input class="form-control light-blue-background" id="contact-form-email" name="email" size="32" type="email" required>
                        <div><p class="warning-msg" id="warning-msg-email"></p></div><br> <!--Please provide a valid email-->
                    </div>
                    
                    <div>
                        <label for="institution">Institution</label><br> <input class="form-control light-blue-background" id="contact-form-inst" name="institution" size="32" type="text" required>
                        <div><p class="warning-msg" id="warning-msg-inst"></p></div><br> <!--Please provide a valid Institution-->
                    </div>
                    
                    <div>
                        <label for="msg">Tell us more about your organization and how we may be able to help you.</label><textarea class="form-control light-blue-background" id="contact-form-moreinfo" cols="100" name="msg" rows="5" type="textarea" required></textarea>
                        <div><p class="warning-msg" id="warning-msg-msg"></p></div><br> <!--Please provide a valid information-->
                    </div>
                    
                    <p>Please indicate which of the following you are interested in</p>
                    <div class="form-group pl-3">
                        <div class="form-check"><input class="form-check-input" type="checkbox" id="contact-form-pl2training" name="pl2training"><label class="form-check-label" for="contact-form-pl2training"> PL&sup2 Trainning - Personalized professional development for mentors and tutors</label><br></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" id="contact-form-pl2toolkit" name="pl2toolkit"><label class="form-check-label" for="contact-form-pl2toolkit"> PL&sup2 Toolkit - Personalized interventions for students</label><br></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" id="contact-form-pl2tutors" name="pl2tutors"><label class="form-check-label" for="contact-form-pl2tutors"> PL&sup2 Tutors - Trained tutors on top</label><br></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" id="contact-form-eventinfo" name="eventinfo"><label class="form-check-label" for="contact-form-eventinfo"> Information on upcoming events and releases</label><br></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" id="contact-form-career" name="career"><label class="form-check-label" for="contact-form-career"> Career Opportunity</label><br></div>
                    </div>
                    
                    <button type="submit" class="btn btn-outline-primary pl2-primary mt-3 pt-2 pb-2 pl-4 pr-4">Submit</button>
                </form>
                
            </div> 

        </div> <!-- End Container -->
        
        <div id="successPage" class="container vh-100 d-none">
            <div class="row pt-lg-5 text-black">
                <h1 class="my-4">Thank you!</h1>
            </div>

            <div class="row pb-lg-5 text-black">
                <div class="h3">
                    Your response has been successfully submitted!
                </div>
            </div>

            <div class="row pb-lg-5 text-black">
                <div class="h6">
                    You will be redirected to the home page in a moment.
                </div>
            </div>

            <div class="row">
                <a href="index.html" class="btn btn-outline-primary pl2-primary mt-3 pl-5 pr-5">Back</a>
            </div>

        </div>

        <div id="failurePage" class="container vh-100 d-none">
            <div class="row pt-lg-5 text-black">
                <h1 class="my-4">Oops...Sorry!</h1>
            </div>

            <div class="row pb-lg-5 text-black">
                <div class="h3">
                    Your response did not go through. Please try again!
                </div>
            </div>

            <div class="row">
                <a href="contact.html" class="btn btn-outline-primary pl2-primary mt-3 pl-5 pr-5">Back</a>
            </div>
        </div>


        <div id="footer"></div>
    </div>


    <!--post data-->
    <script>
        $(document).ready(function(){
            $("form").submit(function(e){
                e.preventDefault();
                if(validateForm()){
                    $(":button[type=submit]").prop('disabled', true);
                    $("input").prop('disabled', true);
                    $("textarea").prop('disabled', true);
                    var formdata = {
                        email: $("#contact-form-email").val(),
                        name: $("#contact-form-name").val(),
                        institution: $("#contact-form-inst").val(),
                        msg: $("#contact-form-moreinfo").val(),
                        // need to check value of checkbox
                        pl2training: $("#contact-form-pl2training").val(),
                        pl2toolkit: $("#contact-form-pl2toolkit").val(),
                        pl2tutors: $("#contact-form-pl2tutors").val(),
                        eventinfo: $("#contact-form-eventinfo").val(),
                        career: $("#contact-form-career").val()
                    };
                    $.ajax({
                        type: "POST",
                        // url for appscript generated by google form
                        url: "https://script.google.com/macros/s/AKfycbzxvBn4Ca_gSwxDCLeQuOe71ZzVG8I28ucYAZld-3iF99Ika5ES9PkJGLRFBqCpklQs/exec", 
                        data: formdata,
                        dataType: "json",
                        success: function(result){
                            $(window).scrollTop(0);
                            $("#mainContainer").removeClass("container-fluid p-3 p-sm-0 d-block");
                            $("#mainContainer").addClass("container-fluid p-3 p-sm-0 d-none");
                            $("#successPage").removeClass("container-fluid p-3 p-sm-0 d-none");
                            $("#successPage").addClass("container-fluid p-3 p-sm-0 d-block");
                            setTimeout(
                                function()
                                {
                                window.location="index.html";
                            }, 5000);
                        },
                        error: function(result){
                            $(window).scrollTop(0);
                            $("#mainContainer").removeClass("container-fluid p-3 p-sm-0 d-block");
                            $("#mainContainer").addClass("container-fluid p-3 p-sm-0 d-none");
                            $("#failurePage").removeClass("container-fluid p-3 p-sm-0 d-none");
                            $("#failurePage").addClass("container-fluid p-3 p-sm-0 d-block");
                    }})
                }
                else{
                    event.preventDefault();
                    event.stopPropagation();
                }
            });
        });
    </script>

    <!--validation-->
    <script>
        $("#contact-form-name").change(function(event){
            if($("#contact-form-name").val() == ""){
                $("#contact-form-name").removeClass("form-control light-blue-background");
                $("#contact-form-name").addClass("form-control light-blue-background invalid-form");
                $("#warning-msg-name").text("Please provide your name");
            }
            else{
                $("#contact-form-name").removeClass("form-control light-blue-background invalid-form");
                $("#contact-form-name").addClass("form-control light-blue-background");
                $("#warning-msg-name").text("");
            }
        })

        $("#contact-form-email").change(function(event){
            if(!$("#contact-form-email").val().toLowerCase()
                        .match(
                        /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                        )){
                $("#contact-form-email").removeClass("form-control light-blue-background");
                $("#contact-form-email").addClass("form-control light-blue-background invalid-form");
                $("#warning-msg-email").text("Please provide a valid email");
            }
            else{
                $("#contact-form-email").removeClass("form-control light-blue-background invalid-form");
                $("#contact-form-email").addClass("form-control light-blue-background");
                $("#warning-msg-email").text("");
            }
        })

        $("#contact-form-inst").change(function(event){
            if($("#contact-form-inst").val() == ''){
                $("#contact-form-inst").removeClass("form-control light-blue-background");
                $("#contact-form-inst").addClass("form-control light-blue-background invalid-form");
                $("#warning-msg-inst").text("Please provide your institution");
            }
            else{
                $("#contact-form-inst").removeClass("form-control light-blue-background invalid-form");
                $("#contact-form-inst").addClass("form-control light-blue-background");
                $("#warning-msg-inst").text("");
            }
        })

        $("#contact-form-moreinfo").change(function(event){
            if($("#contact-form-moreinfo").val() == ''){
                $("#contact-form-moreinfo").removeClass("form-control light-blue-background");
                $("#contact-form-moreinfo").addClass("form-control light-blue-background invalid-form");
                $("#warning-msg-msg").text("Please complete this section");
            }
            else{
                $("#contact-form-moreinfo").removeClass("form-control light-blue-background invalid-form");
                $("#contact-form-moreinfo").addClass("form-control light-blue-background");
                $("#warning-msg-msg").text("");
            }
            
        })
        
        //$("#contact-us-form").submit(function() {validateForm(event);});
    </script>
    </div>

</body>
</html>
